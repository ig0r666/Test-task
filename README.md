# Описание проекта
- Проект представляет из себя реализацию тестового задания для Cloud.ru Camp.
- В каталоге balancer - реализация Балансировщика нагрузки.
- В каталоге limiter - реализация Rate Limiter'a.
- Каталог serverpool выделяет пул серверов, необходимый для распределения нагрузки в балансировщике.

## Разработка HTTP-балансировщика нагрузки на Go
- Для переадресации и для работы с запросами использовалась стандартная библиотека net/http (net/http/httputil).
- Логгирование с помощью slog.
- Для работы с yaml конфигом использовался cleanenv.
- Docker для контейнеризации.
- Предусмотрено использование других алгоритмов балансировки (например, least connections) путем использования интерфейсов.
- Обеспечена необходимая потокобезопасность.
- HealthChecking с заданным интервалом (задается в конфиге *healthcheck_interval* или через переменные окружения *HEALTHCHECK_INTERVAL* в compose.yaml).
- При обнаружении неработающего сервера, балансировщик исключает его из пула серверов до следующего вызова healtcheck.
- Пул серверов регулируется с помощью параметра *URLS*
  
## Реализация Rate-Limiting
- PostgreSQL для хранения состояний клиентов.
- slog для логгирования.
- cleanenv для работы с yaml конфигом.
- net/http для работы с HTTP.
- golang-migrate для миграций.
- Docker для контейнеризации.
- Также был реализован простой CRUD для гибкой работы с каждым из клиентов в отдельности.
- Обеспечена персистентность, путем сохранения в БД состояний клиентов.
- Обеспечена необходимая потокобезопасность.
- Использование интерфейсов для Limiter'a и БД.
- Дефолтный лимит выставляется в конфиге *capacity* или через переменные окружения *CAPACITY* в compose.yaml.
- Частота обновления токенов регулируется через *UPDATE_INTERVAL*.
- CRUD подробно прокомментирован в limiter/adapters/rest/handlers.go
## Описание эндпоинтов
### Тестирование лимитера
+ GET /test

  Этот эндпоинт защищен лимитером для регулирования количества запросов от конкретного клиента

### Создать нового клиента
+ POST /clients
  
  Создает нового клиента с указанным лимитом запросов
  
  Параметры запроса:
  {
  "client_id": "string",
  "capacity": int
  }

### Получить список клиентов
+ GET /clients
  
Возвращает список всех клиентов
### Получение клиента
+ GET /client?client_id={id}
  
  Возвращает информацию о конкретном клиенте
### Обновление клиента
+ PUT /client
  
  Обновляет лимит запросов для клиента

  Параметры запроса:
  {
  "client_id": "string",
  "capacity": int
  }
### Удаление клиента
+ DELETE /client?client_id={id}

  Удаляет клиента с заданным id

## Запуск проетка
Запустить проект:
```Makefile 
make up
или
docker compose up --build -d
```
Запустить отдельно балансировщик:
```Makefile 
make balancer-up
или
docker compose up --build -d balancer serverpool
```
Запустить отдельно лимитер:
```Makefile 
make limiter-up
или
docker compose up --build -d limiter postgres
```
Остановить проект:
```Makefile 
make down
или
docker compose down
```
Полная очистка и остановка:
```Makefile 
make clean
или
docker compose down -v
```
- В текущей конфигурации, балансировщик будет запущен на 8080 порту, а Limiter на 8081 порту

## Вопросы для разогрева
+ На текущий момент, с самой интересной задачей я столкнулся в Университете на курсе Алгоритмов и структур данных.
В одной из работ мне нужно было решить задачу коммивояжёра используя муравьиный алгоритм. Эта задача отняла у меня много времени, но благодаря ей я заинтересовался алгоритмами и начал их изучать в свободное время уже после курса. Пока писал, вспомнил еще одну интересную задачу) Недавно обучался в школе Yadro по разработке микросервисных приложений на Golang. В одном из заданий нужно было реализовать gRPC клиентов и сервер. До этого не работал с этой технологией, но в итоге успешно ее освоил и применил на практике)
+ С ходу сложно припомнить, потому что не привык зацикливаться на неудачах) Помню, что два месяца назад провалил второе алгоритмическое собеседование в Яндекс. В целом рассматриваю неудачи как необходимый опыт, который учит меня новому
+ От участия в буткемпе ожидаю рост в технических и коммуникационных навыках, было бы здорово работать над реальными кейсами в команде опытных разработчиков) Помимо этого, ценю командную работу и сообщество единомышленников. Недавно в Санкт-Петербурге проходил Go Meetup от Вконтакте и я его посетил - в первую очередь понравилось быть причастным к Go сообществу и общаться с ребятами) 
